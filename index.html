<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Portfolio ‚ú®</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,600;0,700;0,800;0,900;1,700&family=Fraunces:ital,opsz,wght@0,9..144,700;1,9..144,400&display=swap" rel="stylesheet">
<style>
:root {
  --bg: #fffef7; --bg2: #fff8ed; --text: #1a1209; --muted: #8a7560; --border: #e8dcc8;
  --mkt: #ff5c35; --mkt-light: #fff0ec; --mkt-mid: #ffd4c8;
  --dsn: #7c3aed; --dsn-light: #f3eeff; --dsn-mid: #ddd6fe;
  --it: #059669;  --it-light: #ecfdf5;  --it-mid: #a7f3d0;
  --yellow: #fbbf24; --yellow-light: #fffbeb; --radius: 20px;
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body { background: var(--bg); color: var(--text); font-family: 'Nunito', sans-serif; font-weight: 600; overflow-x: hidden; }

.doodle-bg { position: fixed; inset: 0; pointer-events: none; z-index: 0; overflow: hidden; }
.doodle-bg svg { position: absolute; opacity: 0.07; }

nav {
  position: fixed; top: 1rem; left: 50%; transform: translateX(-50%); z-index: 100;
  display: flex; align-items: center; justify-content: space-between;
  padding: 0.75rem 1.5rem; background: white; border: 2px solid var(--border);
  border-radius: 100px; box-shadow: 0 4px 20px rgba(0,0,0,0.08);
  width: min(720px, calc(100% - 2rem)); gap: 1rem;
}
.nav-logo { font-family: 'Fraunces', serif; font-size: 1.3rem; color: var(--text); text-decoration: none; white-space: nowrap; }
.nav-logo span { color: var(--mkt); }
.nav-links { display: flex; gap: 0.25rem; list-style: none; }
.nav-links a { text-decoration: none; color: var(--muted); font-size: 0.82rem; font-weight: 700; padding: 0.35rem 0.75rem; border-radius: 100px; transition: all 0.2s; }
.nav-links a:hover { background: var(--bg2); color: var(--text); }
.nav-edit-btn {
  display: flex; align-items: center; gap: 0.4rem; padding: 0.4rem 1rem; border-radius: 100px;
  font-family: 'Nunito', sans-serif; font-size: 0.8rem; font-weight: 800;
  cursor: pointer; border: 2px solid var(--border); background: var(--bg2); color: var(--muted);
  transition: all 0.2s; white-space: nowrap;
}
.nav-edit-btn:hover { border-color: var(--text); color: var(--text); }
.nav-edit-btn.active { background: #fef9c3; border-color: var(--yellow); color: #92400e; }

.edit-banner {
  position: fixed; bottom: 1.5rem; left: 50%;
  transform: translateX(-50%) translateY(80px); z-index: 150;
  background: #1a1209; color: white; border-radius: 100px; padding: 0.65rem 1.5rem;
  font-size: 0.82rem; font-weight: 800; display: flex; align-items: center; gap: 0.75rem;
  box-shadow: 0 8px 24px rgba(0,0,0,0.25); transition: transform 0.4s cubic-bezier(.34,1.56,.64,1); white-space: nowrap;
}
.edit-banner.show { transform: translateX(-50%) translateY(0); }
.edit-banner-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--yellow); animation: pulse 1.5s ease-in-out infinite; }
.btn-exit-edit { background: rgba(255,255,255,0.15); border: none; border-radius: 100px; color: white; font-family: 'Nunito', sans-serif; font-size: 0.75rem; font-weight: 800; padding: 0.25rem 0.75rem; cursor: pointer; transition: background 0.2s; }
.btn-exit-edit:hover { background: rgba(255,255,255,0.25); }

body:not(.edit-mode) .edit-only { display: none !important; }
body.edit-mode .edit-only { display: inline-flex !important; }
body.edit-mode .card-add.edit-only { display: flex !important; }

#hero {
  position: relative; z-index: 1; min-height: 100vh;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  text-align: center; padding: 7rem 2rem 4rem; overflow: hidden;
}
.hero-blob { position: absolute; border-radius: 50%; filter: blur(80px); pointer-events: none; }
.blob-1 { width: 500px; height: 500px; background: #ffede8; top: -100px; left: -100px; }
.blob-2 { width: 400px; height: 400px; background: #eee8ff; bottom: 0; right: -80px; }
.blob-3 { width: 300px; height: 300px; background: #e0fdf4; bottom: 100px; left: 10%; }
.hero-inner { position: relative; z-index: 1; }
.hero-badge { display: inline-flex; align-items: center; gap: 0.4rem; background: var(--yellow-light); border: 2px solid var(--yellow); border-radius: 100px; padding: 0.4rem 1rem; font-size: 0.8rem; font-weight: 800; color: #92400e; margin-bottom: 1.5rem; opacity: 0; animation: popIn 0.5s 0.1s cubic-bezier(.34,1.56,.64,1) forwards; }
.hero-title { font-family: 'Fraunces', serif; font-size: clamp(3rem, 10vw, 8rem); line-height: 1.05; margin-bottom: 1.25rem; opacity: 0; animation: fadeUp 0.7s 0.3s ease forwards; }
.hero-title .wave { display: inline-block; animation: wave 2s 1.5s ease-in-out infinite; }
.col-mkt { color: var(--mkt); } .col-dsn { color: var(--dsn); } .col-it { color: var(--it); }
.hero-sub { font-size: 1.1rem; color: var(--muted); font-weight: 600; max-width: 480px; margin: 0 auto 2rem; opacity: 0; animation: fadeUp 0.7s 0.5s ease forwards; }
.hero-cats { display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap; margin-bottom: 2.5rem; opacity: 0; animation: fadeUp 0.7s 0.7s ease forwards; }
.cat-chip { display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem 1.2rem; border-radius: 100px; font-size: 0.9rem; font-weight: 800; border: 2px solid; transition: transform 0.2s; cursor: default; }
.cat-chip:hover { transform: translateY(-3px) rotate(-2deg); }
.chip-mkt { background: var(--mkt-light); border-color: var(--mkt-mid); color: var(--mkt); }
.chip-dsn { background: var(--dsn-light); border-color: var(--dsn-mid); color: var(--dsn); }
.chip-it  { background: var(--it-light);  border-color: var(--it-mid);  color: var(--it); }
.hero-cta { opacity: 0; animation: fadeUp 0.7s 0.9s ease forwards; }
.btn-cta { display: inline-flex; align-items: center; gap: 0.5rem; background: var(--text); color: white; padding: 0.9rem 2rem; border-radius: 100px; font-family: 'Nunito', sans-serif; font-size: 0.95rem; font-weight: 800; text-decoration: none; border: none; cursor: pointer; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 0 4px 16px rgba(0,0,0,0.15); }
.btn-cta:hover { transform: translateY(-3px); box-shadow: 0 8px 24px rgba(0,0,0,0.2); }
.scroll-bounce { position: absolute; bottom: 2rem; left: 50%; transform: translateX(-50%); font-size: 1.5rem; animation: bounce 1.5s ease-in-out infinite; opacity: 0.5; }

#about { position: relative; z-index: 1; padding: 6rem 2rem; max-width: 1100px; margin: 0 auto; display: grid; grid-template-columns: 1fr 1.2fr; gap: 4rem; align-items: center; }
.about-sticker { background: white; border: 3px solid var(--border); border-radius: var(--radius); padding: 2.5rem; box-shadow: 6px 6px 0 var(--border); position: relative; }
.about-sticker::before { content: 'üëã'; font-size: 3rem; position: absolute; top: -1.5rem; left: 1.5rem; }
.about-label { font-size: 0.75rem; font-weight: 800; letter-spacing: 0.12em; text-transform: uppercase; color: var(--mkt); margin-bottom: 0.75rem; }
.about-title { font-family: 'Fraunces', serif; font-size: 2.5rem; line-height: 1.15; margin-bottom: 1.25rem; }
.about-text { color: var(--muted); font-size: 0.95rem; line-height: 1.8; font-weight: 600; }
.about-text p + p { margin-top: 0.75rem; }
.stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.stat-card { background: white; border: 2px solid var(--border); border-radius: var(--radius); padding: 1.5rem; text-align: center; transition: transform 0.2s, box-shadow 0.2s; box-shadow: 4px 4px 0 var(--border); }
.stat-card:hover { transform: translate(-2px,-2px); box-shadow: 6px 6px 0 var(--border); }
.stat-emoji { font-size: 1.75rem; margin-bottom: 0.5rem; }
.stat-num { font-family: 'Fraunces', serif; font-size: 2.5rem; line-height: 1; font-weight: 700; }
.stat-label { font-size: 0.8rem; color: var(--muted); font-weight: 700; margin-top: 0.25rem; }
.stat-card:nth-child(2) .stat-num { color: var(--mkt); }
.stat-card:nth-child(3) .stat-num { color: var(--dsn); }
.stat-card:nth-child(4) .stat-num { color: var(--it); }

.section-wrap-mkt { background: var(--mkt-light); border-radius: 28px; margin: 0 1rem 2rem; padding: 0.5rem 0 1.5rem; }
.section-wrap-dsn { background: var(--dsn-light); border-radius: 28px; margin: 0 1rem 2rem; padding: 0.5rem 0 1.5rem; }
.section-wrap-it  { background: var(--it-light);  border-radius: 28px; margin: 0 1rem 2rem; padding: 0.5rem 0 1.5rem; }
.portfolio-section { position: relative; z-index: 1; padding: 4rem 2rem 3rem; max-width: 1300px; margin: 0 auto; }
.sec-top { display: flex; align-items: center; justify-content: space-between; margin-bottom: 2.5rem; }
.sec-heading { display: flex; align-items: center; gap: 1rem; }
.sec-emoji { width: 52px; height: 52px; border-radius: 14px; display: flex; align-items: center; justify-content: center; font-size: 1.6rem; border: 2px solid; }
.sec-emoji-mkt { background: white; border-color: var(--mkt-mid); }
.sec-emoji-dsn { background: white; border-color: var(--dsn-mid); }
.sec-emoji-it  { background: white; border-color: var(--it-mid); }
.sec-title { font-family: 'Fraunces', serif; font-size: 2.25rem; line-height: 1; }
.sec-count { font-size: 0.8rem; font-weight: 800; padding: 0.35rem 0.9rem; border-radius: 100px; border: 2px solid; }
.sec-count-mkt { background: white; border-color: var(--mkt-mid); color: var(--mkt); }
.sec-count-dsn { background: white; border-color: var(--dsn-mid); color: var(--dsn); }
.sec-count-it  { background: white; border-color: var(--it-mid);  color: var(--it); }

.cards-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.25rem; }
.card { background: white; border: 2px solid var(--border); border-radius: var(--radius); overflow: hidden; cursor: default; transition: transform 0.25s cubic-bezier(.34,1.56,.64,1), box-shadow 0.25s; box-shadow: 4px 4px 0 var(--border); }
.card:hover { transform: translate(-3px,-5px) rotate(-0.5deg); }
.card.mkt:hover { box-shadow: 6px 6px 0 var(--mkt-mid); border-color: var(--mkt); }
.card.dsn:hover { box-shadow: 6px 6px 0 var(--dsn-mid); border-color: var(--dsn); }
.card.it:hover  { box-shadow: 6px 6px 0 var(--it-mid);  border-color: var(--it); }
.card-thumb { width: 100%; aspect-ratio: 16/9; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; }
.thumb-mkt { background: linear-gradient(135deg, var(--mkt-light), var(--mkt-mid)); }
.thumb-dsn { background: linear-gradient(135deg, var(--dsn-light), var(--dsn-mid)); }
.thumb-it  { background: linear-gradient(135deg, var(--it-light),  var(--it-mid)); }
.card-thumb-icon { transition: transform 0.3s cubic-bezier(.34,1.56,.64,1); display: inline-block; }
.card:hover .card-thumb-icon { transform: scale(1.2) rotate(-8deg); }
.card-body { padding: 1.25rem; }
.card-cat { font-size: 0.68rem; font-weight: 800; letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.4rem; }
.cat-mkt { color: var(--mkt); } .cat-dsn { color: var(--dsn); } .cat-it { color: var(--it); }
.card-title { font-size: 1rem; font-weight: 800; margin-bottom: 0.5rem; line-height: 1.35; color: var(--text); }
.card-desc { font-size: 0.85rem; color: var(--muted); line-height: 1.6; margin-bottom: 0.9rem; font-weight: 600; }
.card-tags { display: flex; flex-wrap: wrap; gap: 0.35rem; }
.tag { font-size: 0.68rem; font-weight: 800; padding: 0.2rem 0.6rem; border-radius: 100px; border: 1.5px solid var(--border); color: var(--muted); background: var(--bg2); }
.card-footer { padding: 0.85rem 1.25rem; border-top: 2px dashed var(--border); display: flex; align-items: center; justify-content: space-between; font-size: 0.8rem; color: var(--muted); font-weight: 700; }
.card-actions { display: flex; gap: 0.4rem; align-items: center; }
.btn-sm { padding: 0.25rem 0.6rem; border-radius: 8px; font-family: 'Nunito', sans-serif; font-size: 0.68rem; font-weight: 800; cursor: pointer; border: 1.5px solid var(--border); background: var(--bg2); color: var(--muted); transition: all 0.15s; text-decoration: none; display: inline-flex; align-items: center; }
.btn-sm:hover { background: var(--text); color: white; border-color: var(--text); }
.btn-sm-del:hover { background: #fee2e2; color: #dc2626; border-color: #fca5a5; }

.card-add { background: white; border: 2.5px dashed var(--border); border-radius: var(--radius); display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 0.75rem; padding: 2.5rem; cursor: pointer; transition: all 0.2s; min-height: 200px; color: var(--muted); }
.card-add:hover { border-color: var(--text); background: var(--bg2); transform: scale(1.02); }
.add-circle { width: 48px; height: 48px; border-radius: 50%; border: 2.5px dashed var(--border); display: flex; align-items: center; justify-content: center; font-size: 1.4rem; transition: all 0.2s; }
.card-add:hover .add-circle { border-style: solid; border-color: var(--text); color: var(--text); transform: rotate(90deg); }
.add-label { font-size: 0.82rem; font-weight: 800; letter-spacing: 0.05em; text-transform: uppercase; }

/* Loading skeleton */
.skeleton { background: linear-gradient(90deg, #f0e8d8 25%, #e8dcc8 50%, #f0e8d8 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; border-radius: 8px; }
@keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }
.skeleton-card { background: white; border: 2px solid var(--border); border-radius: var(--radius); overflow: hidden; box-shadow: 4px 4px 0 var(--border); }
.sk-thumb { aspect-ratio: 16/9; }
.sk-body { padding: 1.25rem; display: flex; flex-direction: column; gap: 0.75rem; }
.sk-line { height: 14px; }
.sk-line-short { width: 40%; }
.sk-line-med { width: 70%; }
.sk-line-full { width: 100%; }

/* Empty state */
.empty-state { grid-column: 1/-1; text-align: center; padding: 3rem; color: var(--muted); }
.empty-state-emoji { font-size: 3rem; margin-bottom: 0.75rem; }
.empty-state-text { font-size: 0.9rem; }

.wavy-divider { text-align: center; font-size: 1.2rem; letter-spacing: 0.5rem; padding: 1rem; color: var(--border); user-select: none; }

/* MODALS */
.modal-overlay, .pw-modal-overlay {
  position: fixed; inset: 0; background: rgba(26,18,9,0.5); backdrop-filter: blur(6px);
  z-index: 200; display: flex; align-items: center; justify-content: center; padding: 1.5rem;
  opacity: 0; pointer-events: none; transition: opacity 0.25s;
}
.modal-overlay { z-index: 200; }
.pw-modal-overlay { z-index: 300; }
.modal-overlay.open, .pw-modal-overlay.open { opacity: 1; pointer-events: all; }
.modal, .pw-modal {
  background: white; border: 2px solid var(--border); border-radius: 24px; padding: 2.25rem;
  width: 100%; box-shadow: 8px 8px 0 var(--border);
  transform: scale(0.95) translateY(10px);
  transition: transform 0.3s cubic-bezier(.34,1.56,.64,1);
  max-height: 90vh; overflow-y: auto;
}
.modal { max-width: 520px; }
.pw-modal { max-width: 380px; text-align: center; }
.modal-overlay.open .modal, .pw-modal-overlay.open .pw-modal { transform: scale(1) translateY(0); }
.modal-header { display: flex; align-items: center; gap: 0.75rem; margin-bottom: 1.75rem; }
.modal-emoji { font-size: 2rem; }
.modal-title, .pw-title { font-family: 'Fraunces', serif; font-size: 1.75rem; }
.pw-lock-icon { font-size: 3rem; margin-bottom: 0.75rem; display: block; }
.pw-sub { color: var(--muted); font-size: 0.88rem; margin-bottom: 1.5rem; }
.pw-input-wrap { position: relative; margin-bottom: 1rem; }
.pw-input-wrap input { text-align: center; letter-spacing: 0.2em; font-size: 1.1rem; padding: 0.75rem 2.5rem 0.75rem 1rem; }
.pw-toggle { position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); background: none; border: none; cursor: pointer; font-size: 1rem; color: var(--muted); }
.pw-error { color: #dc2626; font-size: 0.8rem; font-weight: 700; margin-bottom: 0.75rem; min-height: 1.2em; }
.form-group { margin-bottom: 1.1rem; }
label { display: block; font-size: 0.72rem; font-weight: 800; letter-spacing: 0.1em; text-transform: uppercase; color: var(--muted); margin-bottom: 0.4rem; }
input, textarea, select { width: 100%; background: var(--bg2); border: 2px solid var(--border); border-radius: 12px; color: var(--text); font-family: 'Nunito', sans-serif; font-size: 0.9rem; font-weight: 600; padding: 0.65rem 0.9rem; outline: none; transition: border-color 0.2s, box-shadow 0.2s; appearance: none; }
input:focus, textarea:focus, select:focus { border-color: var(--dsn); box-shadow: 0 0 0 3px var(--dsn-light); }
textarea { resize: vertical; min-height: 75px; }
.form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
.modal-actions { display: flex; gap: 0.75rem; justify-content: flex-end; margin-top: 1.5rem; }
.btn { padding: 0.65rem 1.4rem; border-radius: 100px; font-family: 'Nunito', sans-serif; font-size: 0.85rem; font-weight: 800; cursor: pointer; border: 2px solid; transition: all 0.2s; }
.btn-ghost { border-color: var(--border); background: var(--bg2); color: var(--muted); }
.btn-ghost:hover { border-color: var(--text); color: var(--text); }
.btn-primary { background: var(--text); border-color: var(--text); color: white; }
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; transform: none; }

/* Toast */
.toast { position: fixed; bottom: 5rem; left: 50%; transform: translateX(-50%) translateY(20px); background: #1a1209; color: white; padding: 0.65rem 1.25rem; border-radius: 100px; font-size: 0.82rem; font-weight: 800; z-index: 400; opacity: 0; transition: all 0.3s; pointer-events: none; white-space: nowrap; }
.toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
.toast.success { background: var(--it); }
.toast.error { background: #dc2626; }

#contact { position: relative; z-index: 1; padding: 6rem 2rem; text-align: center; }
.contact-inner { background: white; border: 2px solid var(--border); border-radius: 32px; padding: 4rem 3rem; max-width: 700px; margin: 0 auto; box-shadow: 8px 8px 0 var(--border); position: relative; }
.contact-confetti { position: absolute; font-size: 1.5rem; pointer-events: none; animation: floatAround 4s ease-in-out infinite; }
.cc1{top:-1rem;left:2rem} .cc2{top:1rem;right:2rem;animation-delay:1s} .cc3{bottom:.5rem;left:4rem;animation-delay:2s} .cc4{bottom:-.5rem;right:4rem;animation-delay:.5s}
.contact-title { font-family: 'Fraunces', serif; font-size: clamp(2.5rem, 6vw, 4.5rem); line-height: 1.1; margin-bottom: 1rem; }
.contact-sub { color: var(--muted); font-size: 1rem; margin-bottom: 2rem; }
.contact-btns { display: flex; gap: 0.75rem; justify-content: center; flex-wrap: wrap; }
.cta-btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.8rem 1.6rem; border-radius: 100px; font-family: 'Nunito', sans-serif; font-size: 0.9rem; font-weight: 800; text-decoration: none; border: 2px solid; transition: transform 0.2s, box-shadow 0.2s; cursor: pointer; background: transparent; }
.cta-btn:hover { transform: translateY(-3px); box-shadow: 0 6px 16px rgba(0,0,0,0.12); }
.cta-email { background: var(--mkt); border-color: var(--mkt); color: white; }
.cta-social { border-color: var(--border); color: var(--text); background: var(--bg2); }

footer { position: relative; z-index: 1; padding: 1.5rem 2rem; border-top: 2px dashed var(--border); display: flex; align-items: center; justify-content: space-between; color: var(--muted); font-size: 0.82rem; font-weight: 700; }

@keyframes fadeUp { from{opacity:0;transform:translateY(20px)} to{opacity:1;transform:translateY(0)} }
@keyframes popIn { from{opacity:0;transform:scale(0.7)} to{opacity:1;transform:scale(1)} }
@keyframes wave { 0%,100%{transform:rotate(0)} 25%{transform:rotate(20deg)} 75%{transform:rotate(-10deg)} }
@keyframes bounce { 0%,100%{transform:translateX(-50%) translateY(0)} 50%{transform:translateX(-50%) translateY(8px)} }
@keyframes floatAround { 0%,100%{transform:translateY(0) rotate(0)} 50%{transform:translateY(-8px) rotate(15deg)} }
@keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:.5;transform:scale(1.3)} }
@keyframes shake { 0%,100%{transform:translateX(0)} 25%{transform:translateX(-6px)} 75%{transform:translateX(6px)} }

@media(max-width:1024px){.cards-grid{grid-template-columns:repeat(2,1fr)}}
@media(max-width:768px){
  nav{padding:.6rem 1rem} .nav-links{display:none}
  #about{grid-template-columns:1fr;padding:4rem 1.5rem;gap:2rem}
  .portfolio-section{padding:3rem 1.25rem} .cards-grid{grid-template-columns:1fr}
  .sec-top{flex-direction:column;align-items:flex-start;gap:.75rem}
  #contact{padding:3rem 1.25rem} .contact-inner{padding:2.5rem 1.5rem}
  footer{flex-direction:column;gap:.5rem;text-align:center}
  .form-row{grid-template-columns:1fr}
  .section-wrap-mkt,.section-wrap-dsn,.section-wrap-it{margin:0 0 1.5rem;border-radius:20px}
}

/* ‚îÄ‚îÄ DRAWER ‚îÄ‚îÄ */
.drawer-overlay {
  position: fixed; inset: 0; background: rgba(26,18,9,0.45);
  backdrop-filter: blur(4px); z-index: 500;
  opacity: 0; pointer-events: none; transition: opacity 0.35s;
}
.drawer-overlay.open { opacity: 1; pointer-events: all; }

.drawer {
  position: fixed; top: 0; right: 0; bottom: 0;
  width: min(560px, 100vw);
  background: var(--bg); z-index: 501;
  transform: translateX(100%);
  transition: transform 0.4s cubic-bezier(.32,.72,0,1);
  display: flex; flex-direction: column;
  overflow: hidden;
  box-shadow: -8px 0 48px rgba(0,0,0,0.12);
}
.drawer.open { transform: translateX(0); }

.drawer-header {
  padding: 1.5rem 1.75rem 1.25rem;
  border-bottom: 2px dashed var(--border);
  display: flex; align-items: flex-start; justify-content: space-between; gap: 1rem;
  flex-shrink: 0;
}
.drawer-cat-badge {
  display: inline-flex; align-items: center; gap: 0.4rem;
  padding: 0.3rem 0.8rem; border-radius: 100px;
  font-size: 0.72rem; font-weight: 800;
  letter-spacing: 0.08em; text-transform: uppercase;
  border: 2px solid; margin-bottom: 0.6rem;
}
.badge-mkt { background: var(--mkt-light); border-color: var(--mkt-mid); color: var(--mkt); }
.badge-dsn { background: var(--dsn-light); border-color: var(--dsn-mid); color: var(--dsn); }
.badge-it  { background: var(--it-light);  border-color: var(--it-mid);  color: var(--it); }

.drawer-title {
  font-family: 'Fraunces', serif; font-size: 1.65rem; line-height: 1.2;
}
.drawer-year { font-size: 0.82rem; color: var(--muted); margin-top: 0.25rem; font-weight: 700; }
.drawer-close {
  width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0;
  border: 2px solid var(--border); background: white; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.1rem; transition: all 0.2s; color: var(--muted);
}
.drawer-close:hover { border-color: var(--text); color: var(--text); transform: rotate(90deg); }

.drawer-body {
  flex: 1; overflow-y: auto; padding: 1.5rem 1.75rem 2rem;
  display: flex; flex-direction: column; gap: 1.75rem;
}
.drawer-body::-webkit-scrollbar { width: 4px; }
.drawer-body::-webkit-scrollbar-track { background: transparent; }
.drawer-body::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }

.drawer-image {
  width: 100%; aspect-ratio: 16/9; border-radius: var(--radius);
  object-fit: cover; border: 2px solid var(--border);
  background: var(--bg2);
}
.drawer-image-placeholder {
  width: 100%; aspect-ratio: 16/9; border-radius: var(--radius);
  border: 2px solid var(--border); background: linear-gradient(135deg, var(--bg2), var(--border));
  display: flex; align-items: center; justify-content: center; font-size: 4rem;
}

.drawer-section { display: flex; flex-direction: column; gap: 0.6rem; }
.drawer-section-label {
  font-size: 0.7rem; font-weight: 800; letter-spacing: 0.12em;
  text-transform: uppercase; color: var(--muted);
  display: flex; align-items: center; gap: 0.4rem;
}
.drawer-section-label::after {
  content: ''; flex: 1; height: 1px; background: var(--border);
}
.drawer-desc {
  font-size: 0.95rem; color: var(--text); line-height: 1.8; font-weight: 600;
  white-space: pre-wrap;
}

.outcome-card {
  background: white; border: 2px solid var(--border); border-radius: var(--radius);
  padding: 1.25rem 1.5rem;
  box-shadow: 4px 4px 0 var(--border);
  font-size: 0.95rem; line-height: 1.7; font-weight: 600;
  white-space: pre-wrap;
  position: relative; overflow: hidden;
}
.outcome-card::before {
  content: ''; position: absolute; left: 0; top: 0; bottom: 0;
  width: 4px; background: var(--it);
}
.outcome-card.mkt::before { background: var(--mkt); }
.outcome-card.dsn::before { background: var(--dsn); }
.outcome-card.it::before  { background: var(--it); }

.tools-list { display: flex; flex-wrap: wrap; gap: 0.5rem; }
.tool-chip {
  display: flex; align-items: center; gap: 0.35rem;
  padding: 0.4rem 0.9rem; border-radius: 100px;
  font-size: 0.8rem; font-weight: 800;
  background: white; border: 2px solid var(--border);
  color: var(--text); transition: all 0.15s;
}
.tool-chip:hover { border-color: var(--dsn); color: var(--dsn); background: var(--dsn-light); }

.drawer-tags { display: flex; flex-wrap: wrap; gap: 0.4rem; }

.drawer-footer {
  padding: 1.25rem 1.75rem;
  border-top: 2px dashed var(--border);
  display: flex; gap: 0.75rem; flex-shrink: 0;
  background: white;
}
.drawer-footer .edit-only { display: none !important; }
body.edit-mode .drawer-footer .edit-only { display: inline-flex !important; }

/* card clickable cursor */
.card { cursor: pointer; }

</style>
</head>
<body>

<div class="doodle-bg">
  <svg width="100" height="100" viewBox="0 0 100 100" style="top:10%;left:5%"><circle cx="50" cy="50" r="40" fill="none" stroke="#ff5c35" stroke-width="6"/></svg>
  <svg width="80" height="80" viewBox="0 0 80 80" style="top:30%;right:8%"><rect x="10" y="10" width="60" height="60" rx="8" fill="none" stroke="#7c3aed" stroke-width="5"/></svg>
  <svg width="120" height="120" viewBox="0 0 120 120" style="bottom:20%;left:3%"><polygon points="60,10 110,100 10,100" fill="none" stroke="#059669" stroke-width="5"/></svg>
  <svg width="60" height="60" viewBox="0 0 60 60" style="top:60%;right:15%"><path d="M30 5 L35 25 L55 25 L40 38 L46 58 L30 46 L14 58 L20 38 L5 25 L25 25 Z" fill="none" stroke="#fbbf24" stroke-width="4"/></svg>
</div>

<nav>
  <a href="#hero" class="nav-logo">Port<span>o</span>‚ú®</a>
  <ul class="nav-links">
    <li><a href="#about">About</a></li>
    <li><a href="#marketing">Marketing</a></li>
    <li><a href="#design">Design</a></li>
    <li><a href="#it">IT</a></li>
    <li><a href="#contact">Contact</a></li>
  </ul>
  <button class="nav-edit-btn" id="nav-edit-btn" onclick="handleEditToggle()">üîí Edit</button>
</nav>

<div class="edit-banner" id="edit-banner">
  <div class="edit-banner-dot"></div>
  <span>‚úèÔ∏è Edit Mode aktif</span>
  <button class="btn-exit-edit" onclick="exitEditMode()">Keluar ‚úï</button>
</div>

<div class="toast" id="toast"></div>

<!-- PASSWORD MODAL -->
<div class="pw-modal-overlay" id="pw-modal-overlay" onclick="closePwOutside(event)">
  <div class="pw-modal">
    <span class="pw-lock-icon">üîê</span>
    <h2 class="pw-title">Masukkan Password</h2>
    <p class="pw-sub">Hanya pemilik portfolio yang bisa mengedit.</p>
    <div class="pw-input-wrap">
      <input type="password" id="pw-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" onkeydown="if(event.key==='Enter')checkPw()">
      <button class="pw-toggle" id="pw-toggle" onclick="togglePw()">üëÅ</button>
    </div>
    <div class="pw-error" id="pw-error"></div>
    <div style="display:flex;gap:.75rem;justify-content:center">
      <button class="btn btn-ghost" onclick="closePwModal()">Batal</button>
      <button class="btn btn-primary" onclick="checkPw()">Masuk üîì</button>
    </div>
  </div>
</div>

<!-- ADD/EDIT PROJECT MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModalOutside(event)">
  <div class="modal">
    <div class="modal-header">
      <span class="modal-emoji" id="modal-emoji">üìÅ</span>
      <h2 class="modal-title" id="modal-title">Tambah Proyek</h2>
    </div>
    <div class="form-group">
      <label>Kategori</label>
      <select id="f-cat" onchange="updateModalEmoji()">
        <option value="mkt">üì¢ Marketing</option>
        <option value="dsn">üé® Design</option>
        <option value="it">üíª IT / Dev</option>
      </select>
    </div>
    <div class="form-group">
      <label>Judul Proyek *</label>
      <input type="text" id="f-title" placeholder="Nama proyek kamu...">
    </div>
    <div class="form-group">
      <label>Deskripsi</label>
      <textarea id="f-desc" placeholder="Ceritakan proyek ini singkat..."></textarea>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Tags (pisah koma)</label><input type="text" id="f-tags" placeholder="React, Design, Ads"></div>
      <div class="form-group"><label>Tahun</label><input type="text" id="f-year" placeholder="2024"></div>
    </div>
    <div class="form-row">
      <div class="form-group"><label>Emoji Icon</label><input type="text" id="f-icon" placeholder="üöÄ" maxlength="4"></div>
      <div class="form-group"><label>URL Proyek (opsional)</label><input type="url" id="f-url" placeholder="https://..."></div>
    </div>
    <div class="form-group">
      <label>URL Gambar (opsional)</label>
      <input type="url" id="f-image" placeholder="https://... (link gambar/screenshot)">
    </div>
    <div class="form-group">
      <label>Deskripsi Lengkap</label>
      <textarea id="f-desc-long" placeholder="Ceritakan lebih detail tentang proyek ini ‚Äî konteks, proses, tantangan..." style="min-height:100px"></textarea>
    </div>
    <div class="form-group">
      <label>Hasil / Outcome üèÜ</label>
      <textarea id="f-outcome" placeholder="Contoh: Meningkatkan engagement 3√ó, Revenue naik 40%, Delivered on time..." style="min-height:80px"></textarea>
    </div>
    <div class="form-group">
      <label>Tools yang Dipakai (pisah koma)</label>
      <input type="text" id="f-tools" placeholder="Figma, React, Google Ads, Photoshop...">
    </div>
    <div class="modal-actions">
      <button class="btn btn-ghost" onclick="closeModal()">Batal</button>
      <button class="btn btn-primary" id="save-btn" onclick="saveProject()">Simpan ‚úì</button>
    </div>
  </div>
</div>

<!-- HERO -->
<section id="hero">
  <div class="hero-blob blob-1"></div>
  <div class="hero-blob blob-2"></div>
  <div class="hero-blob blob-3"></div>
  <div class="hero-inner">
    <div class="hero-badge">üéâ Welcome to my portfolio!</div>
    <h1 class="hero-title">Halo, aku <span class="col-mkt">kreatif</span>,<br><span class="col-dsn">visioner</span>, &amp;<br><span class="col-it">tech-savvy</span> <span class="wave">‚úåÔ∏è</span></h1>
    <p class="hero-sub">Koleksi karya di bidang Marketing, Design, dan IT ‚Äî semua ada di sini!</p>
    <div class="hero-cats">
      <span class="cat-chip chip-mkt">üì¢ Marketing</span>
      <span class="cat-chip chip-dsn">üé® Design</span>
      <span class="cat-chip chip-it">üíª IT / Dev</span>
    </div>
    <div class="hero-cta"><a href="#marketing" class="btn-cta">Lihat Karya üëá</a></div>
  </div>
  <div class="scroll-bounce">‚Üì</div>
</section>

<!-- ABOUT -->
<section id="about">
  <div class="about-sticker">
    <p class="about-label">Tentang Saya</p>
    <h2 class="about-title">Serba bisa,<br>satu tujuan.</h2>
    <div class="about-text">
      <p>Profesional yang bergerak di lintas disiplin ‚Äî dari marketing &amp; strategi, visual design &amp; branding, hingga pengembangan teknologi.</p>
      <p>Setiap proyek dikerjakan dengan penuh semangat, kreativitas, dan dedikasi terhadap kualitas. üöÄ</p>
    </div>
  </div>
  <div class="stats-grid">
    <div class="stat-card"><div class="stat-emoji">üìÅ</div><div class="stat-num" id="stat-total">‚Äî</div><div class="stat-label">Total Proyek</div></div>
    <div class="stat-card"><div class="stat-emoji">üì¢</div><div class="stat-num" id="stat-mkt">‚Äî</div><div class="stat-label">Marketing</div></div>
    <div class="stat-card"><div class="stat-emoji">üé®</div><div class="stat-num" id="stat-dsn">‚Äî</div><div class="stat-label">Design</div></div>
    <div class="stat-card"><div class="stat-emoji">üíª</div><div class="stat-num" id="stat-it">‚Äî</div><div class="stat-label">IT / Dev</div></div>
  </div>
</section>

<!-- MARKETING -->
<div class="section-wrap-mkt">
  <section id="marketing" class="portfolio-section">
    <div class="sec-top">
      <div class="sec-heading"><div class="sec-emoji sec-emoji-mkt">üì¢</div><h2 class="sec-title">Marketing</h2></div>
      <span class="sec-count sec-count-mkt" id="count-mkt">...</span>
    </div>
    <div class="cards-grid" id="grid-mkt"><div class="card-add edit-only" onclick="openModal('mkt')"><div class="add-circle">+</div><span class="add-label">Tambah Proyek</span></div></div>
  </section>
</div>

<div class="wavy-divider">ÔΩû ÔΩû ÔΩû ÔΩû ÔΩû</div>

<!-- DESIGN -->
<div class="section-wrap-dsn">
  <section id="design" class="portfolio-section">
    <div class="sec-top">
      <div class="sec-heading"><div class="sec-emoji sec-emoji-dsn">üé®</div><h2 class="sec-title">Design</h2></div>
      <span class="sec-count sec-count-dsn" id="count-dsn">...</span>
    </div>
    <div class="cards-grid" id="grid-dsn"><div class="card-add edit-only" onclick="openModal('dsn')"><div class="add-circle">+</div><span class="add-label">Tambah Proyek</span></div></div>
  </section>
</div>

<div class="wavy-divider">ÔΩû ÔΩû ÔΩû ÔΩû ÔΩû</div>

<!-- IT -->
<div class="section-wrap-it">
  <section id="it" class="portfolio-section">
    <div class="sec-top">
      <div class="sec-heading"><div class="sec-emoji sec-emoji-it">üíª</div><h2 class="sec-title">IT / Dev</h2></div>
      <span class="sec-count sec-count-it" id="count-it">...</span>
    </div>
    <div class="cards-grid" id="grid-it"><div class="card-add edit-only" onclick="openModal('it')"><div class="add-circle">+</div><span class="add-label">Tambah Proyek</span></div></div>
  </section>
</div>

<!-- CONTACT -->
<section id="contact">
  <div class="contact-inner">
    <span class="contact-confetti cc1">üéâ</span><span class="contact-confetti cc2">‚ú®</span>
    <span class="contact-confetti cc3">üåü</span><span class="contact-confetti cc4">üéä</span>
    <h2 class="contact-title">Yuk,<br>kita <span style="color:var(--mkt)">ngobrol!</span> üí¨</h2>
    <p class="contact-sub">Punya proyek seru atau mau kolaborasi? Aku siap! üöÄ</p>
    <div class="contact-btns">
      <a class="cta-btn cta-email" href="/cdn-cgi/l/email-protection#3c54595050537c59445d514c5059125f5351">üìß Email Aku</a>
      <a class="cta-btn cta-social" href="#" target="_blank">üíº LinkedIn</a>
      <a class="cta-btn cta-social" href="#" target="_blank">üì∏ Instagram</a>
      <a class="cta-btn cta-social" href="#" target="_blank">üêô GitHub</a>
    </div>
  </div>
</section>

<footer>
  <span style="font-family:'Fraunces',serif;font-size:1.15rem">Porto<span style="color:var(--mkt)">‚ú®</span></span>
  <span id="footer-year"></span>
</footer>

<script>
// ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// ‚ö†Ô∏è  GANTI PASSWORD INI sebelum upload!
const EDIT_PASSWORD = 'portfolio2025';

// Supabase config
const SUPABASE_URL = 'https://hampbzfgecadamgeysdn.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhhbXBiemZnZWNhZGFtZ2V5c2RuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxNzUxMzAsImV4cCI6MjA4Nzc1MTEzMH0.mttbHWvQtbUNgJiTFHwZ2eUvlq8TN5jsxNPQzZA4alI';

const HEADERS = { 'Content-Type': 'application/json', 'apikey': SUPABASE_KEY, 'Authorization': `Bearer ${SUPABASE_KEY}` };
const DB = `${SUPABASE_URL}/rest/v1/projects`;

const CAT_EMOJI  = { mkt:'üì¢', dsn:'üé®', it:'üíª' };
const CATS       = { mkt:'Marketing', dsn:'Design', it:'IT / Dev' };
const CAT_CLASS  = { mkt:'cat-mkt', dsn:'cat-dsn', it:'cat-it' };
const THUMB_CLASS= { mkt:'thumb-mkt', dsn:'thumb-dsn', it:'thumb-it' };

let isEditMode = false;
let editingId  = null;
let allProjects = [];

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('footer-year').textContent = `¬© ${new Date().getFullYear()} ‚Äî Made with ‚ù§Ô∏è`;
  showSkeletons();
  loadProjects();
});

// ‚îÄ‚îÄ SUPABASE HELPERS ‚îÄ‚îÄ
async function loadProjects() {
  try {
    const res = await fetch(`${DB}?order=created_at.asc`, { headers: HEADERS });
    if (!res.ok) throw new Error();
    allProjects = await res.json();
    renderAll();
  } catch(e) {
    showToast('‚ùå Gagal memuat data', 'error');
    ['mkt','dsn','it'].forEach(cat => {
      const grid = document.getElementById(`grid-${cat}`);
      const addBtn = grid.querySelector('.card-add');
      const empty = emptyState();
      grid.insertBefore(empty, addBtn);
    });
  }
  updateStats();
}

async function insertProject(item) {
  const res = await fetch(DB, {
    method: 'POST',
    headers: { ...HEADERS, 'Prefer': 'return=representation' },
    body: JSON.stringify(item)
  });
  if (!res.ok) throw new Error(await res.text());
  const rows = await res.json();
  return rows[0];
}

async function updateProject(id, item) {
  const res = await fetch(`${DB}?id=eq.${id}`, {
    method: 'PATCH',
    headers: { ...HEADERS, 'Prefer': 'return=representation' },
    body: JSON.stringify(item)
  });
  if (!res.ok) throw new Error(await res.text());
  const rows = await res.json();
  return rows[0];
}

async function deleteProject(id) {
  const res = await fetch(`${DB}?id=eq.${id}`, { method: 'DELETE', headers: HEADERS });
  if (!res.ok) throw new Error(await res.text());
}

// ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ
function renderAll() {
  ['mkt','dsn','it'].forEach(cat => {
    const grid = document.getElementById(`grid-${cat}`);
    // Remove existing cards & skeletons, keep add button
    [...grid.children].forEach(el => { if (!el.classList.contains('card-add')) el.remove(); });
    const items = allProjects.filter(p => p.category === cat);
    const addBtn = grid.querySelector('.card-add');
    if (items.length === 0) {
      grid.insertBefore(emptyState(), addBtn);
    } else {
      items.forEach(item => grid.insertBefore(buildCard(item), addBtn));
    }
  });
  updateStats();
}

function buildCard(item) {
  const cat = item.category;
  const div = document.createElement('div');
  div.className = `card ${cat}`;
  div.dataset.id = item.id;
  const tags = Array.isArray(item.tags) ? item.tags : [];

  div.innerHTML = `
    <div class="card-thumb ${THUMB_CLASS[cat]}"><span class="card-thumb-icon">${item.icon||'üìÅ'}</span></div>
    <div class="card-body">
      <div class="card-cat ${CAT_CLASS[cat]}">${CATS[cat]}</div>
      <div class="card-title">${esc(item.title)}</div>
      <div class="card-desc">${esc(item.description||'')}</div>
      <div class="card-tags">${tags.map(t=>`<span class="tag">${esc(t)}</span>`).join('')}</div>
    </div>
    <div class="card-footer">
      <span>${esc(String(item.year||''))}</span>
      <div class="card-actions">
        ${item.url ? `<a class="btn-sm view-link" href="${esc(item.url)}" target="_blank" rel="noopener">üîó View</a>` : ''}
        <button class="btn-sm edit-only btn-edit-card">‚úèÔ∏è Edit</button>
        <button class="btn-sm btn-sm-del edit-only btn-del-card">üóë Hapus</button>
      </div>
    </div>`;

  // Attach events AFTER innerHTML so elements exist in DOM
  const editBtn = div.querySelector('.btn-edit-card');
  const delBtn = div.querySelector('.btn-del-card');
  if (editBtn) editBtn.addEventListener('click', (e) => { e.stopPropagation(); openEditModal(item.id); });
  if (delBtn)  delBtn.addEventListener('click',  (e) => { e.stopPropagation(); confirmDelete(item.id); });

  div.addEventListener('click', (e) => {
    if (e.target.closest('.edit-only') || e.target.closest('.view-link')) return;
    openDrawer(item.id);
  });

  return div;
}
function emptyState() {
  const div = document.createElement('div');
  div.className = 'empty-state';
  div.innerHTML = `<div class="empty-state-emoji">üå±</div><div class="empty-state-text">Belum ada proyek. Masuk edit mode untuk menambahkan!</div>`;
  return div;
}

function showSkeletons() {
  ['mkt','dsn','it'].forEach(cat => {
    const grid = document.getElementById(`grid-${cat}`);
    const addBtn = grid.querySelector('.card-add');
    for (let i = 0; i < 2; i++) {
      const sk = document.createElement('div');
      sk.className = 'skeleton-card';
      sk.innerHTML = `<div class="skeleton sk-thumb"></div><div class="sk-body"><div class="skeleton sk-line sk-line-short"></div><div class="skeleton sk-line sk-line-med"></div><div class="skeleton sk-line sk-line-full"></div><div class="skeleton sk-line sk-line-full"></div></div>`;
      grid.insertBefore(sk, addBtn);
    }
  });
}

function updateStats() {
  const counts = { mkt: 0, dsn: 0, it: 0 };
  allProjects.forEach(p => { if (counts[p.category] !== undefined) counts[p.category]++; });
  const total = counts.mkt + counts.dsn + counts.it;
  document.getElementById('stat-total').textContent = total;
  document.getElementById('stat-mkt').textContent = counts.mkt;
  document.getElementById('stat-dsn').textContent = counts.dsn;
  document.getElementById('stat-it').textContent  = counts.it;
  document.getElementById('count-mkt').textContent = `${counts.mkt} Project${counts.mkt!==1?'s':''}`;
  document.getElementById('count-dsn').textContent = `${counts.dsn} Project${counts.dsn!==1?'s':''}`;
  document.getElementById('count-it').textContent  = `${counts.it} Project${counts.it!==1?'s':''}`;
}

// ‚îÄ‚îÄ PASSWORD & EDIT MODE ‚îÄ‚îÄ
function handleEditToggle() {
  if (isEditMode) { exitEditMode(); return; }
  document.getElementById('pw-input').value = '';
  document.getElementById('pw-error').textContent = '';
  document.getElementById('pw-modal-overlay').classList.add('open');
  setTimeout(() => document.getElementById('pw-input').focus(), 300);
}

function closePwModal() { document.getElementById('pw-modal-overlay').classList.remove('open'); }
function closePwOutside(e) { if (e.target === document.getElementById('pw-modal-overlay')) closePwModal(); }
function togglePw() {
  const inp = document.getElementById('pw-input'), btn = document.getElementById('pw-toggle');
  inp.type = inp.type === 'password' ? 'text' : 'password';
  btn.textContent = inp.type === 'password' ? 'üëÅ' : 'üôà';
}
function checkPw() {
  const val = document.getElementById('pw-input').value;
  const err = document.getElementById('pw-error');
  if (val === EDIT_PASSWORD) {
    closePwModal(); isEditMode = true;
    document.body.classList.add('edit-mode');
    document.getElementById('edit-banner').classList.add('show');
    const btn = document.getElementById('nav-edit-btn');
    btn.textContent = '‚úèÔ∏è Edit'; btn.classList.add('active');
    showToast('‚úÖ Edit mode aktif!', 'success');
  } else {
    err.textContent = '‚ùå Password salah, coba lagi!';
    err.style.animation = 'none';
    requestAnimationFrame(() => err.style.animation = 'shake 0.3s ease');
    document.getElementById('pw-input').value = '';
    document.getElementById('pw-input').focus();
  }
}
function exitEditMode() {
  isEditMode = false;
  document.body.classList.remove('edit-mode');
  document.getElementById('edit-banner').classList.remove('show');
  const btn = document.getElementById('nav-edit-btn');
  btn.textContent = 'üîí Edit'; btn.classList.remove('active');
}

// ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ
const CAT_DEFAULTS = { mkt:'üì¢', dsn:'üé®', it:'üíª' };
function updateModalEmoji() {
  document.getElementById('modal-emoji').textContent = CAT_EMOJI[document.getElementById('f-cat').value];
}
function openModal(cat) {
  editingId = null;
  document.getElementById('modal-title').textContent = 'Tambah Proyek ‚ú®';
  document.getElementById('f-cat').value = cat;
  document.getElementById('f-title').value = '';
  document.getElementById('f-desc').value = '';
  document.getElementById('f-tags').value = '';
  document.getElementById('f-year').value = new Date().getFullYear();
  document.getElementById('f-icon').value = CAT_DEFAULTS[cat];
  document.getElementById('f-url').value = '';
  document.getElementById('f-image').value = '';
  document.getElementById('f-desc-long').value = '';
  document.getElementById('f-outcome').value = '';
  document.getElementById('f-tools').value = '';
  updateModalEmoji();
  document.getElementById('modal-overlay').classList.add('open');
  setTimeout(() => document.getElementById('f-title').focus(), 300);
}
function openEditModal(id) {
  const item = allProjects.find(p => p.id === id);
  if (!item) return;
  editingId = id;
  document.getElementById('modal-title').textContent = 'Edit Proyek ‚úèÔ∏è';
  document.getElementById('f-cat').value = item.category;
  document.getElementById('f-title').value = item.title;
  document.getElementById('f-desc').value = item.description || '';
  document.getElementById('f-tags').value = (item.tags||[]).join(', ');
  document.getElementById('f-year').value = item.year || '';
  document.getElementById('f-icon').value = item.icon || '';
  document.getElementById('f-url').value = item.url || '';
  document.getElementById('f-image').value = item.image_url || '';
  document.getElementById('f-desc-long').value = item.description_long || '';
  document.getElementById('f-outcome').value = item.outcome || '';
  document.getElementById('f-tools').value = (item.tools||[]).join(', ');
  updateModalEmoji();
  document.getElementById('modal-overlay').classList.add('open');
}
function closeModal() { document.getElementById('modal-overlay').classList.remove('open'); }
function closeModalOutside(e) { if (e.target === document.getElementById('modal-overlay')) closeModal(); }

async function saveProject() {
  const title = document.getElementById('f-title').value.trim();
  if (!title) { document.getElementById('f-title').focus(); return; }
  const btn = document.getElementById('save-btn');
  btn.disabled = true; btn.textContent = 'Menyimpan...';
  const payload = {
    category: document.getElementById('f-cat').value,
    title,
    description: document.getElementById('f-desc').value.trim(),
    tags: document.getElementById('f-tags').value.split(',').map(t=>t.trim()).filter(Boolean),
    year: document.getElementById('f-year').value || String(new Date().getFullYear()),
    icon: document.getElementById('f-icon').value.trim() || CAT_DEFAULTS[document.getElementById('f-cat').value],
    url: document.getElementById('f-url').value.trim() || null,
    image_url: document.getElementById('f-image').value.trim() || null,
    description_long: document.getElementById('f-desc-long').value.trim() || null,
    outcome: document.getElementById('f-outcome').value.trim() || null,
    tools: document.getElementById('f-tools').value.split(',').map(t=>t.trim()).filter(Boolean),
  };
  try {
    if (editingId) {
      const updated = await updateProject(editingId, payload);
      const idx = allProjects.findIndex(p => p.id === editingId);
      if (idx > -1) allProjects[idx] = updated;
      const oldEl = document.querySelector(`[data-id="${editingId}"]`);
      if (oldEl) { const newEl = buildCard(updated); oldEl.replaceWith(newEl); }
      showToast('‚úÖ Proyek diperbarui!', 'success');
    } else {
      const created = await insertProject(payload);
      allProjects.push(created);
      const grid = document.getElementById(`grid-${payload.category}`);
      // Remove empty state if present
      const empty = grid.querySelector('.empty-state');
      if (empty) empty.remove();
      const addBtn = grid.querySelector('.card-add');
      const el = buildCard(created);
      el.style.opacity = '0'; el.style.transform = 'scale(0.85)';
      grid.insertBefore(el, addBtn);
      requestAnimationFrame(() => {
        el.style.transition = 'opacity .3s, transform .4s cubic-bezier(.34,1.56,.64,1)';
        el.style.opacity = '1'; el.style.transform = 'scale(1)';
      });
      showToast('üéâ Proyek ditambahkan!', 'success');
    }
    updateStats();
    closeModal();
  } catch(e) {
    showToast('‚ùå Gagal menyimpan, coba lagi', 'error');
  }
  btn.disabled = false; btn.textContent = 'Simpan ‚úì';
}

async function confirmDelete(id) {
  if (!confirm('Hapus proyek ini? üóëÔ∏è')) return;
  try {
    await deleteProject(id);
    allProjects = allProjects.filter(p => p.id !== id);
    const el = document.querySelector(`[data-id="${id}"]`);
    if (el) {
      el.style.transition = 'all .3s';
      el.style.opacity = '0'; el.style.transform = 'scale(.8) rotate(-3deg)';
      setTimeout(() => {
        el.remove();
        // Show empty state if grid empty
        const cat = id; // we need category ‚Äî get from allProjects (already removed), check DOM
        ['mkt','dsn','it'].forEach(c => {
          const grid = document.getElementById(`grid-${c}`);
          const cards = grid.querySelectorAll('.card');
          if (cards.length === 0 && !grid.querySelector('.empty-state')) {
            const addBtn = grid.querySelector('.card-add');
            grid.insertBefore(emptyState(), addBtn);
          }
        });
      }, 300);
    }
    updateStats();
    showToast('üóëÔ∏è Proyek dihapus', 'success');
  } catch(e) {
    showToast('‚ùå Gagal menghapus', 'error');
  }
}

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
let toastTimer;
function showToast(msg, type='') {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.className = `toast ${type} show`;
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 3000);
}


// ‚îÄ‚îÄ DRAWER ‚îÄ‚îÄ
let drawerProjectId = null;
const CAT_BADGE_CLASS = { mkt: 'badge-mkt', dsn: 'badge-dsn', it: 'badge-it' };

function openDrawer(id) {
  const item = allProjects.find(p => p.id === id);
  if (!item) return;
  drawerProjectId = id;
  const cat = item.category;

  // Header
  const badge = document.getElementById('d-badge');
  badge.className = `drawer-cat-badge ${CAT_BADGE_CLASS[cat]}`;
  badge.textContent = `${CAT_EMOJI[cat]} ${CATS[cat]}`;
  document.getElementById('d-title').textContent = item.title;
  document.getElementById('d-year').textContent = item.year ? `üìÖ ${item.year}` : '';

  // Footer buttons
  const viewBtn = document.getElementById('d-view-btn');
  if (item.url) { viewBtn.href = item.url; viewBtn.style.display = 'flex'; }
  else { viewBtn.style.display = 'none'; }

  // Body
  const body = document.getElementById('drawer-body');
  body.innerHTML = '';

  // Image / placeholder
  const imgWrap = document.createElement('div');
  if (item.image_url) {
    imgWrap.innerHTML = `<img class="drawer-image" src="${esc(item.image_url)}" alt="${esc(item.title)}" onerror="this.parentElement.innerHTML='<div class=\"drawer-image-placeholder\">${item.icon||'üìÅ'}</div>'">`;
  } else {
    imgWrap.innerHTML = `<div class="drawer-image-placeholder">${item.icon||'üìÅ'}</div>`;
  }
  body.appendChild(imgWrap);

  // Description long
  const desc = item.description_long || item.description || '';
  if (desc) {
    const s = section('üìù Deskripsi');
    const p = document.createElement('div');
    p.className = 'drawer-desc'; p.textContent = desc;
    s.appendChild(p); body.appendChild(s);
  }

  // Outcome
  if (item.outcome) {
    const s = section('üèÜ Hasil & Outcome');
    const card = document.createElement('div');
    card.className = `outcome-card ${cat}`; card.textContent = item.outcome;
    s.appendChild(card); body.appendChild(s);
  }

  // Tools
  const tools = Array.isArray(item.tools) ? item.tools : [];
  if (tools.length > 0) {
    const s = section('üõ†Ô∏è Tools');
    const list = document.createElement('div'); list.className = 'tools-list';
    tools.forEach(t => { const c = document.createElement('div'); c.className = 'tool-chip'; c.textContent = t; list.appendChild(c); });
    s.appendChild(list); body.appendChild(s);
  }

  // Tags
  const tags = Array.isArray(item.tags) ? item.tags : [];
  if (tags.length > 0) {
    const s = section('üè∑Ô∏è Tags');
    const tlist = document.createElement('div'); tlist.className = 'drawer-tags';
    tags.forEach(t => { const sp = document.createElement('span'); sp.className = 'tag'; sp.textContent = t; tlist.appendChild(sp); });
    s.appendChild(tlist); body.appendChild(s);
  }

  document.getElementById('drawer-overlay').classList.add('open');
  document.getElementById('drawer').classList.add('open');
  document.body.style.overflow = 'hidden';
}

function section(label) {
  const wrap = document.createElement('div'); wrap.className = 'drawer-section';
  const lbl = document.createElement('div'); lbl.className = 'drawer-section-label'; lbl.textContent = label;
  wrap.appendChild(lbl);
  return wrap;
}

function closeDrawer() {
  document.getElementById('drawer-overlay').classList.remove('open');
  document.getElementById('drawer').classList.remove('open');
  document.body.style.overflow = '';
  drawerProjectId = null;
}

function editFromDrawer() {
  if (!drawerProjectId) return;
  closeDrawer();
  openEditModal(drawerProjectId);
}

function deleteFromDrawer() {
  if (!drawerProjectId) return;
  closeDrawer();
  setTimeout(() => confirmDelete(drawerProjectId), 200);
}

// Close drawer on ESC
function esc(s) {
  return String(s)
    .replace(/&/g,'&amp;')
    .replace(/</g,'&lt;')
    .replace(/>/g,'&gt;')
    .replace(/"/g,'&quot;')
    .replace(/'/g,'&#039;');
}
  </script>
